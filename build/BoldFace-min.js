/*jslint nomen: false, debug: true, evil: false, vars: true, indent: 2 */
/*global $, _, GoogleWebFonts, jQuery, clearInterval: false, clearTimeout: false, document: false, event: false, frames: false, history: false, Image: false, location: false, name: false, navigator: false, Option: false, parent: false, screen: false, setInterval: false, setTimeout: false, window: false, XMLHttpRequest: false */
(function(a,b){var c={};c.version="0.0.2",c.mode="production",c.html="<h1>BoldFace</h1> <div id='font_list'> <ul class='fontList'></ul> </div> <div> <div class='property'> <div class='name'> <label for='selector'>Family: </label> <input type='text' name='selector' value='*' class='selector'> </div> <div class='name'> <span>Family: </span> <span>Abel</span> </div> <div class='variants'> <span>Variants: </span> <span> <select multiple> <option>regular</option> </select> </span> </div> <div class='subsets'> <span>Subsets: </span> <span> <select multiple> <option>latin</option> </select> </span> </div> <div class='size'> <span>Size: </span> <span> <ul> <li>8px</li> <li>10px</li> <li>12px</li> <li>14px</li> <li>16px</li> <li>20px</li> <li>22px</li> <li>24px</li> <li>26px</li> <li>28px</li> <li>30px</li> <li>32px</li> <li>34px</li> <li>36px</li> <li>38px</li> <li>40px</li> <li>42px</li> <li>44px</li> <li>46px</li> <li>48px</li> <li>60px</li> <li>62px</li> <li>64px</li> <li>66px</li> <li>68px</li> <li>70px</li> <li>72px</li> <li>74px</li> <li>76px</li> <li>78px</li> <li>80px</li> <li>82px</li> <li>84px</li> <li>86px</li> <li>88px</li> </ul> </span> </div> </div> </div>",c.bookmarklet_host="https://raw.github.com",c.init=function(){c.addLoadingScreen(),c.loadDependencies(),c.init_after_jQueryIsLoaded()},c.loadDependencies=function(){c.load_js("cdnjs.cloudflare.com/ajax/libs/jquery/1.6.2/jquery.min.js"),c.load_js("cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"),c.load_js("cdnjs.cloudflare.com/ajax/libs/underscore.js/1.1.7/underscore-min.js"),c.load_app_js("/agirorn/BoldFace/master/build/googleWebFonts.js")},c.addHtmlToBody=function(){$("#BoldFace").append($(c.html)),$("#BoldFace").draggable({handle:"h1"}),c.setupSelectionList(),c.populateFontsList(),$("#BoldFace div.loading").remove()},c.htmlToBodyReady=function(a,b,d){$("body").append(a),$("#BoldFace").draggable({handle:"h1"}),c.setupSelectionList(),c.populateFontsList()},c.familyClass=function(a){return a.replace(" ","_")},c.populateFontsList=function(){var a,b=$("#BoldFace > #font_list > ul");b.html(""),_.each(GoogleWebFonts.items,function(d){a=$("<li>"+d.family+"</li>"),a.css("font-family",d.family),a.addClass(c.familyClass(d.family)),b.append(a)})},c.setupSelectionList=function(){$("body").bind("keydown",c.move_list_up_or_down),$("#BoldFace > #font_list").click(c.select_item),$("#BoldFace .size ul").click(c.select_item),$("body").click(function(){$("#BoldFace .focused").removeClass("focused")})},c.move_list_up_or_down=function(a){var b,d,e=$(".focused");if(e.length>=1){b=e.find(".selected");if(a.which===40)return b.parent().children("li").index(b)!==b.siblings().length?(d=b.next(),$(d).addClass("selected"),$(b).removeClass("selected"),c.selectionChanged(),!1):!1;if(a.which===38&&b.parent().children("li").index(b)!==0)return d=b.prev(),$(d).addClass("selected"),$(b).removeClass("selected"),c.selectionChanged(),!1}},c.select_item=function(a){return a.preventDefault(),$(a.target).parent().find(".selected").removeClass("selected"),$("#BoldFace .focused").removeClass("focused"),$(a.target).parent().addClass("focused"),$(a.target).parent(".focused").find(".selected").removeClass("selected"),$(a.target).addClass("selected"),c.selectionChanged(),!1},c.loadGoogleWebFonts=function(){_.each(GoogleWebFonts.items,c.loadGoogleWebFont)},c.loadGoogleWebFont=function(a){var b,c,d="http://fonts.googleapis.com/css?family=",e=$("head");b=a.family.replace(/ /g,"+"),c=$("<link rel='stylesheet' type='text/css'>"),href=d+b,a.variants.length>1&&(href=href+":"+_.select(a.variants,function(a){return a!=="regular"}).join(",")),c.attr("href",href),e.append(c)},c.selectionChanged=function(){var a=$("#BoldFace .selector").val(),b=$(a).filter(":not(#BoldFace *)");b.css("font-family",$("#BoldFace #font_list .selected").text()),b.css("font-size",$("#BoldFace .size ul .selected").text());var d=$("#BoldFace #font_list .selected").text(),e=_.detect(GoogleWebFonts.items,function(a){return a.family===d});d!==""&&c.setVariants(e)},c.setVariants=function(a){var b,c=$(".variants select");c.html(""),_.each(a.variants,function(a){b=$("<option>"+a+"</option>"),c.append(b)})},c.setSubsets=function(a){var b,c=$(".subsets select");c.html(""),_.each(a.subsets,function(a){b=$("<option>"+a+"</option>"),c.append(b)})},c.load_js=function(a){var c,d=b.createElement("script");d.src=("https:"===b.location.protocol?"https":"http")+"://"+a,d.type="text/javascript",d.async="true",c=b.getElementsByTagName("script")[0],c.parentNode.insertBefore(d,c)},c.load_js_https=function(a){var c,d=b.createElement("script");d.src="https://"+a,d.type="text/javascript",d.async="true",c=b.getElementsByTagName("script")[0],c.parentNode.insertBefore(d,c)},c.load_app_js=function(a){var d,e=b.createElement("script");e.src=c.bookmarklet_host+a,e.type="text/javascript",e.async="true",d=b.getElementsByTagName("script")[0],d.parentNode.insertBefore(e,d)},c.load_app_css=function(a){var d;a=c.bookmarklet_host+a,d=b.createElement("link"),d.rel="stylesheet",d.type="text/css",d.href=a,b.getElementsByTagName("head")[0].appendChild(d)},c.checkFor_jQuery=function(){typeof a.jQuery!="undefined"&&typeof a.GoogleWebFonts!="undefined"&&(clearInterval(c.checkFor_jQueryInterval),jQuery(b).ready(function(a){c.addHtmlToBody(),c.loadGoogleWebFonts()}))},c.init_after_jQueryIsLoaded=function(){c.checkFor_jQueryInterval=setInterval(c.checkFor_jQuery,100)},c.addLoadingScreen=function(){var a,d,e;c.load_app_css("/agirorn/BoldFace/master/build/BoldFace.css"),a=b.createElement("div"),a.id="BoldFace",d=b.createElement("div"),d.classList.add("loading"),a.appendChild(d),e=b.createElement("p"),e.classList.add("message"),d.appendChild(e),b.getElementsByTagName("body")[0].appendChild(a),c.animateLoading()},c.animateLoading=function(){var d=b.getElementById("BoldFace");if(typeof d!="undefined"){var e=d.getElementsByClassName("message")[0];typeof e!="undefined"&&(e.textContent===""?e.textContent="Loading":e.textContent==="Loading"?e.textContent="Loading.":e.textContent==="Loading."?e.textContent="Loading..":e.textContent==="Loading.."?e.textContent="Loading...":e.textContent==="Loading..."?e.textContent="Loading....":e.textContent==="Loading...."?e.textContent="Loading.....":e.textContent==="Loading....."&&(e.textContent="Loading."),a.setTimeout(c.animateLoading,300))}},a.BoldFace=c,c.init()})(this,this.document)